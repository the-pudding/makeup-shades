!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=null,i=null,a=null;function s(t){console.error(t)}e.default=function(){return new Promise(function(t,e){(function(){var t=["brand_dictionary","group_dictionary"].map(function(t){return"assets/data/"+t+".csv"});return new Promise(function(e,n){var r;(r=d3).loadData.apply(r,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t).concat([function(t,r){t?n(t):e(r)}]))})})().then(function(t){!function(t){i=t[0],t[1],a=d3.map(i,function(t){return t.brand_short})}(t)}).then(function(e){t(new Promise(function(t,e){d3.loadData("assets/data/shades.csv",function(n,s){var l;n&&e(n),l=s[0],o=l.map(function(t){return r({},t,{brand_short:t.brand,brand:a.get(t.brand).brand,product_short:t.product,product:(e=t.brand,n=t.product,o=i.filter(function(t){return t.brand_short==e}),d3.map(o,function(t){return t.foundation_short}).get(n).foundation),hex:t.hex,H:+t.H,S:+t.S,V:+t.V,L:+t.L,group:t.group,lightnessGroup:function(t){switch(!0){case t>=90:return 9;case t>=80:return 8;case t>=70:return 7;case t>=60:return 6;case t>=50:return 5;case t>=40:return 4;case t>=30:return 3;case t>=20:return 2;case t>=10:return 1;default:return 0}}(+t.L)});var e,n,o}),t(o)})}))}).catch(s)})}},function(t,e,n){t.exports=function(){"use strict";function t(t){for(var e=t.length,n=[],r=0;r<e;r+=1)n.push(t[r]);return n}function e(t){return t instanceof Element?t:"string"==typeof t?document.querySelector(t):null}function n(t){return"scrollama__debug-step--"+t.id+"-"+t.i}function r(t){return"scrollama__debug-offset--"+t.id}function o(t){var e=t.id,o=t.offsetVal,i=t.stepEl,a=i[0].getAttribute("class");i.forEach(function(t,r){return function(t){var e=n({id:t.id,i:t.i}),r=document.createElement("div");r.setAttribute("id",e+"_above"),r.setAttribute("class","scrollama__debug-step"),r.style.position="fixed",r.style.left="0",r.style.width="100%",r.style.backgroundImage="repeating-linear-gradient(45deg, green 0, green 2px, white 0, white 40px)",r.style.border="2px solid green",r.style.opacity="0.33",r.style.zIndex="9999",r.style.display="none",document.body.appendChild(r);var o=document.createElement("div");o.setAttribute("id",e+"_below"),o.setAttribute("class","scrollama__debug-step"),o.style.position="fixed",o.style.left="0",o.style.width="100%",o.style.backgroundImage="repeating-linear-gradient(135deg, orange 0, orange 2px, white 0, white 40px)",o.style.border="2px solid orange",o.style.opacity="0.33",o.style.zIndex="9999",o.style.display="none",document.body.appendChild(o)}({id:e,i:r})}),function(t){var e=t.id,n=t.offsetVal,o=t.stepClass,i=document.createElement("div");i.setAttribute("id",r({id:e})),i.setAttribute("class","scrollama__debug-offset"),i.style.position="fixed",i.style.left="0",i.style.width="100%",i.style.height="0px",i.style.borderTop="2px dashed black",i.style.zIndex="9999";var a=document.createElement("p");a.innerText='".'+o+'" trigger: '+n,a.style.fontSize="12px",a.style.fontFamily="monospace",a.style.color="black",a.style.margin="0",a.style.padding="6px",i.appendChild(a),document.body.appendChild(i)}({id:e,offsetVal:o,stepClass:a})}function i(t){var e=t.id,o=t.stepOffsetHeight,i=t.offsetMargin;t.offsetVal,o.forEach(function(t,r){return function(t){var e=t.h,r=t.offsetMargin,o=n({id:t.id,i:t.i}),i=document.querySelector("#"+o+"_above");i.style.height=e+"px",i.style.top=r-e+"px";var a=document.querySelector("#"+o+"_below");a.style.height=e+"px",a.style.top=r+"px"}({id:e,h:t,i:r,offsetMargin:i})}),function(t){var e=t.offsetMargin,n=r({id:t.id});document.querySelector("#"+n).style.top=e+"px"}({id:e,offsetMargin:i})}function a(t){var e=t.id,r=t.index,o=t.state,i=n({id:e,i:r}),a=document.querySelector("#"+i+"_above"),s=document.querySelector("#"+i+"_below"),l="enter"===o?"block":"none";a&&(a.style.display=l),s&&(s.style.display=l)}return function(){var n=1,r={},s={},l=null,c=null,u=null,d=null,p=0,f=0,b=0,g=0,y=null,h=null,v=null,m=!1,x=!1,w=!1,k=!1,A=0,C=!1,O=!1,I=null,E=null,_=-1,M=null,T=[];function G(t){var e=0;if(t.offsetParent)do{e+=t.offsetTop,t=t.offsetParent}while(t);return e<0?0:e}function P(t){return+t.getAttribute("data-scrollama-index")}function j(){window.pageYOffset>_?M="down":window.pageYOffset<_&&(M="up"),_=window.pageYOffset}function H(){var t,e;b=window.innerHeight,t=document.body,e=document.documentElement,g=Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight),v=c?c.getBoundingClientRect():null,f=p*b,y=u?u.map(function(t){return t.offsetHeight}):[],h=u?u.map(G):[],x&&m&&J(),w&&i({id:d,stepOffsetHeight:y,offsetMargin:f,offsetVal:p})}function S(t){t&&!x?(m&&J(),x=!0):t||(s.top&&s.top.disconnect(),s.bottom&&s.bottom.disconnect(),s.stepAbove&&s.stepAbove.forEach(function(t){return t.disconnect()}),s.stepBelow&&s.stepBelow.forEach(function(t){return t.disconnect()}),s.stepProgress&&s.stepProgress.forEach(function(t){return t.disconnect()}),s.viewportAbove&&s.viewportAbove.forEach(function(t){return t.disconnect()}),s.viewportBelow&&s.viewportBelow.forEach(function(t){return t.disconnect()}),x=!1)}function z(t,e){if("above"===e)for(var n=0;n<t;n++){var r=I[n];"enter"===r.state&&W(u[n]),"up"===r.direction&&(B(u[n],"down"),W(u[n]))}else if("below"===e)for(var o=I.length-1;o>t;o--){var i=I[o];"enter"===i.state&&W(u[o]),"down"===i.direction&&(B(u[o],"up"),W(u[o]))}}function B(t,e){void 0===e&&(e=!0);var n=P(t),o={element:t,index:n,direction:M};I[n].direction=M,I[n].state="enter",C&&e&&"down"===M&&z(n,"above"),C&&e&&"up"===M&&z(n,"below"),r.stepEnter&&"function"==typeof r.stepEnter&&!T[n]&&(r.stepEnter(o,I),w&&a({id:d,index:n,state:"enter"}),O&&(T[n]=!0)),k&&F(t,"down"===M?0:1)}function W(t){var e=P(t),n={element:t,index:e,direction:M};I[e].direction=M,I[e].state="exit",k&&F(t,"down"===M?1:0),r.stepExit&&"function"==typeof r.stepExit&&(r.stepExit(n,I),w&&a({id:d,index:e,state:"exit"}))}function F(t,e){var n={element:t,index:P(t),progress:e};r.stepProgress&&"function"==typeof r.stepProgress&&r.stepProgress(n)}function L(){var t={direction:M};E.direction=M,E.state="enter",r.containerEnter&&"function"==typeof r.containerEnter&&r.containerEnter(t)}function R(){var t={direction:M};E.direction=M,E.state="exit",r.containerExit&&"function"==typeof r.containerExit&&r.containerExit(t)}function q(t){j(),t.forEach(function(t){var e=t.isIntersecting,r=t.boundingClientRect,o=t.target,i=r.bottom,a=r.height,s=i-f,l=P(o),c=I[l];s>=-n&&(e&&"down"===M&&"enter"!==c.state?B(o,M):e||"up"!==M||"enter"!==c.state?!e&&s>=a&&"down"===M&&"enter"===c.state&&W(o):W(o))})}function V(t){j(),t.forEach(function(t){var e=t.isIntersecting,r=t.boundingClientRect,o=t.target,i=r.bottom,a=r.height,s=i-f,l=P(o),c=I[l];s>=-n&&s<a&&e&&"up"===M&&"enter"!==c.state?B(o,M):s<=n&&!e&&"down"===M&&"enter"===c.state&&W(o)})}function N(t){j(),t.forEach(function(t){var e=t.isIntersecting,n=t.target,r=P(n),o=I[r];e&&"down"===M&&"enter"!==o.state&&"down"!==o.direction&&(B(n,"down"),W(n))})}function D(t){j(),t.forEach(function(t){var e=t.isIntersecting,n=t.target,r=P(n),o=I[r];e&&"up"===M&&"enter"!==o.state&&"up"!==o.direction&&(B(n,"up"),W(n))})}function $(t){j(),t.forEach(function(t){var e=t.isIntersecting,r=t.intersectionRatio,o=t.boundingClientRect,i=t.target,a=o.bottom;e&&a-f>=-n&&F(i,+r.toFixed(3))})}function U(t){j();var e=t[0],r=e.isIntersecting,o=e.boundingClientRect;(o.top,o.bottom)>-n&&(r?L():"enter"===E.state&&R())}function Y(t){j();var e=t[0],r=e.isIntersecting;e.boundingClientRect.top<n&&(r?L():"enter"===E.state&&R())}function J(){s.viewportAbove&&s.viewportAbove.forEach(function(t){return t.disconnect()}),s.viewportAbove=u.map(function(t,e){var n=h[e],r=-(b-f+y[e]),o=new IntersectionObserver(N,{root:null,rootMargin:n+"px 0px "+r+"px 0px",threshold:0});return o.observe(t),o}),s.viewportBelow&&s.viewportBelow.forEach(function(t){return t.disconnect()}),s.viewportBelow=u.map(function(t,e){var n=-(f+y[e]),r=g-h[e]-y[e]-f,o=new IntersectionObserver(D,{root:null,rootMargin:n+"px 0px "+r+"px 0px",threshold:0});return o.observe(t),o}),s.stepAbove&&s.stepAbove.forEach(function(t){return t.disconnect()}),s.stepAbove=u.map(function(t,e){var n=y[e],r=new IntersectionObserver(q,{root:null,rootMargin:n+"px 0px "+(-b+f)+"px 0px",threshold:0});return r.observe(t),r}),s.stepBelow&&s.stepBelow.forEach(function(t){return t.disconnect()}),s.stepBelow=u.map(function(t,e){var n=-f,r=g-b+y[e]+f,o=new IntersectionObserver(V,{root:null,rootMargin:n+"px 0px "+r+"px 0px",threshold:0});return o.observe(t),o}),k&&(s.stepProgress&&s.stepProgress.forEach(function(t){return t.disconnect()}),s.stepProgress=u.map(function(t,e){var n=y[e]-f+"px 0px "+(-b+f)+"px 0px",r=function(t){for(var e=Math.ceil(t/A),n=[],r=1/e,o=0;o<e;o++)n.push(o*r);return n}(y[e]),o=new IntersectionObserver($,{root:null,rootMargin:n,threshold:r});return o.observe(t),o})),l&&c&&(function(){s.top&&s.top.unobserve(l);var t={root:null,rootMargin:b+"px 0px -"+b+"px 0px",threshold:0};s.top=new IntersectionObserver(U,t),s.top.observe(l)}(),function(){s.bottom&&s.bottom.unobserve(l);var t={root:null,rootMargin:"-"+v.height+"px 0px "+v.height+"px 0px",threshold:0};s.bottom=new IntersectionObserver(Y,t),s.bottom.observe(l)}())}var K={setup:function(n){var r=n.container,i=n.graphic,a=n.step,s=n.offset;void 0===s&&(s=.5);var f=n.progress;void 0===f&&(f=!1);var b=n.threshold;void 0===b&&(b=4);var g=n.debug;void 0===g&&(g=!1);var y=n.order;void 0===y&&(y=!0);var h,v,x,_,M,T=n.once;return void 0===T&&(T=!1),v=(h="abcdefghijklmnopqrstuv").length,x=(new Date).getTime(),d=""+[0,0,0].map(function(t){return h[Math.floor(Math.random()*v)]}).join("")+x,_=a,void 0===M&&(M=document),u="string"==typeof _?t(M.querySelectorAll(_)):_ instanceof NodeList?t(_):_ instanceof Array?_:[],l=r?e(r):null,c=i?e(i):null,u.length?(w=g,k=f,C=y,O=T,K.offsetTrigger(s),A=Math.max(1,+b),m=!0,w&&o({id:d,stepEl:u,offsetVal:p}),u.forEach(function(t,e){return t.setAttribute("data-scrollama-index",e)}),I=u.map(function(){return{direction:null,state:null}}),E={direction:null,state:null},H(),S(!0),K):(console.error("scrollama error: no step elements"),K)},resize:function(){return H(),K},enable:function(){return S(!0),K},disable:function(){return S(!1),K},destroy:function(){S(!1),Object.keys(r).forEach(function(t){return r[t]=null}),Object.keys(s).forEach(function(t){return s[t]=null})},offsetTrigger:function(t){return t&&(isNaN(t),1)?(p=Math.min(Math.max(0,t),1),K):p},onStepEnter:function(t){return r.stepEnter=t,K},onStepExit:function(t){return r.stepExit=t,K},onStepProgress:function(t){return r.stepProgress=t,K},onContainerEnter:function(t){return r.containerEnter=t,K},onContainerExit:function(t){return r.containerExit=t,K}};return K}}()},function(t,e,n){"use strict";d3.selection.prototype.spark=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum(),r={init:function(){r.resize(),r.render()},resize:function(){return e.node().offsetWidth,e.node().offsetHeight,r},render:function(){var t=d3.map([{num:0,group:"Fenty"},{num:2,group:"US Bestsellers"},{num:3,group:"BIPOC Founders"},{num:4,group:"White Founders"},{num:5,group:"Nigeria"},{num:6,group:"Japan"},{num:7,group:"India"}],function(t){return t.num}),o=[],i=d3.nest().key(function(t){return t.group}).key(function(t){return t.lightnessGroup}).entries(n).map(function(t){var e=t.values;o.push(e);var n=d3.range(0,10).map(function(t){var n=t.toString();return e.find(function(t){return t.key===n})||{key:n,values:[]}});return{key:t.key,values:n}}),a=e.selectAll(".bin-group").data(i).enter().append("div").attr("class",function(t,e){return"bin-group bin-group-"+e});a.selectAll(".bin-brandTGroup").data(function(t){return[t]}).enter().append("div").attr("class","bin-brandTGroup").append("text").text(function(e){return t.get(e.key).group}).attr("class","tk-atlas bin-brandTitle"),a.append("div").attr("class","category-group").selectAll(".bin-category").data(function(t){return t.values}).enter().append("div").attr("class",function(t,e){return"bin-category bin-category-"+e}).style("height",function(t,e){return 5*t.values.length+"px"}).selectAll(".bin-swatchGroup").data(function(t){return[t]}).enter().append("div").attr("class","bin-swatchGroup").selectAll(".bin-swatch").data(function(t){return t.values}).enter().append("div").attr("class",function(t){return"bin-swatch bin-swatch-"+t.L}).style("height","3px").style("width","15px").style("background-color",function(t){return"#"+t.hex});var s=a.selectAll(".bin-labelGroup").data([0]).enter().append("div").attr("class","bin-labelGroup"),l=s.append("div").attr("class","bin-labelTGroup"),c=s.append("div").attr("class","bin-labelsOnly");return l.selectAll(".bin-labelTitle").data(["Lightness"]).enter().append("text").text(function(t){return t}).attr("class","tk-atlas bin-labelTitle"),c.selectAll(".bin-labelCat").data([0,1,2,3,4,5,6,7,8,9,10]).enter().append("div").attr("class",function(t){return 1&t?"bin-labelCat bin-labelCat-odd":"bin-labelCat bin-labelCat-even"}).selectAll(".bin-label").data(function(t){return[t]}).enter().append("text").attr("class","tk-atlas bin-label").text(function(t){return""+10*t}).attr("alignment-baseline","middle").attr("text-anchor","middle"),r},data:function(t){return arguments.length?(n=t,e.datum(n),r.render(),r):n},toggle:function(t){var n=e.selectAll(".bin-category"),o=e.selectAll(".bin-swatch"),i=e.selectAll(".bin-labelGroup"),a=e.selectAll(".bin-count"),s=e.selectAll(".bin-vsCat"),l=e.selectAll(".bin-vs"),c=d3.selectAll(".graphic-legend"),u=e.selectAll(".bin-category-2, .bin-vsCat-3, .bin-category-3, .bin-vsCat-4, .bin-category-5, .bin-vsCat-6, .bin-category-9, .bin-vsCat-10"),d=e.selectAll(".bin-category-6, .bin-vsCat-7, .bin-category-7, .bin-vsCat-8, .bin-category-8, .bin-vsCat-9");return console.log({legend:c}),0==t&&(n.classed("spread",!1).transition().duration(500).ease(d3.easeCubicInOut).style("height",function(t,e){return 5*t.values.length+"px"}).style("margin","0px").style("border-color","rgba(0,0,0,0)"),o.transition().duration(500).ease(d3.easeCubicInOut).style("height","4px"),i.style("opacity",0),a.style("opacity",0).style("background-color","rgba(0,0,0,0)"),s.style("border-color","rgba(0,0,0,0)").transition().duration(500).ease(d3.easeCubicInOut).style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"0px"}).style("margin","0px"),l.style("opacity",0),c.style("opacity",0),u.style("background-color","rgba(0, 0, 0, 0)"),d.style("background-color","rgba(0, 0, 0, 0)")),1==t&&(n.classed("spread",!0).transition().duration(500).ease(d3.easeCubicInOut).style("height","45px").style("margin","2px 0").style("border-color","#c9c9c9"),o.transition().duration(500).ease(d3.easeCubicInOut).style("height","2px"),i.transition().duration(500).ease(d3.easeCubicInOut).style("opacity",1),a.style("opacity",0).style("background-color","rgba(0,0,0,0)"),s.transition().duration(500).ease(d3.easeCubicInOut).style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"45px"}).style("border-color","#c9c9c9").style("margin","2px 0"),l.style("opacity",0),c.style("opacity",0),u.style("background-color","rgba(0, 0, 0, 0)"),d.style("background-color","rgba(0, 0, 0, 0)")),2==t&&(n.classed("spread",!0).style("height","45px").style("margin","2px 0").style("border-color","#c9c9c9"),o.style("height","2px"),i.style("opacity",1),a.transition().duration(500).delay(function(t,e){return e>10?100*(e-10):100*e}).ease(d3.easeCubicInOut).style("opacity",1).transition().duration(500).delay(250).style("background-color",function(t,e,n){return d3.select(n[e]).classed("bin-count-winner")?"#84F0C9":"rgba(0,0,0,0)"}),s.style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"45px"}).style("border-color","#c9c9c9").style("margin","2px 0"),l.transition().duration(500).delay(function(t,e){return 100*e}).ease(d3.easeCubicInOut).style("opacity",1),c.transition().duration(500).ease(d3.easeCubicInOut).style("opacity",1),u.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(0, 0, 0, 0)"),d.style("background-color","rgba(0, 0, 0, 0)")),3==t&&(n.classed("spread",!0).style("height","45px").style("margin","2px 0").style("border-color","#c9c9c9"),o.style("height","2px"),i.style("opacity",1),a.transition().duration(500).delay(function(t,e){return e>10?100*(e-10):100*e}).ease(d3.easeCubicInOut).style("opacity",1).transition().duration(500).delay(250).style("background-color",function(t,e,n){return d3.select(n[e]).classed("bin-count-winner")?"#84F0C9":"rgba(0,0,0,0)"}),s.style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"45px"}).style("border-color","#c9c9c9").style("margin","2px 0"),l.transition().duration(500).delay(function(t,e){return 100*e}).ease(d3.easeCubicInOut).style("opacity",1),c.transition().duration(500).ease(d3.easeCubicInOut).style("opacity",1),u.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(132, 240, 201, .20)"),d.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(0, 0, 0, 0)")),4==t&&(n.classed("spread",!0).style("height","45px").style("margin","2px 0").style("border-color","#c9c9c9"),o.style("height","2px"),i.style("opacity",1),a.transition().duration(500).delay(function(t,e){return e>10?100*(e-10):100*e}).ease(d3.easeCubicInOut).style("opacity",1).transition().duration(500).delay(250).style("background-color",function(t,e,n){return d3.select(n[e]).classed("bin-count-winner")?"#84F0C9":"rgba(0,0,0,0)"}),s.style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"45px"}).style("border-color","#c9c9c9").style("margin","2px 0"),l.transition().duration(500).delay(function(t,e){return 100*e}).ease(d3.easeCubicInOut).style("opacity",1),c.transition().duration(500).ease(d3.easeCubicInOut).style("opacity",1),u.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(0, 0, 0, 0)"),d.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(132, 240, 201, .20)")),r}};return r.init(),r});return e.length>1?e:e.pop()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=(r=n(0))&&r.__esModule?r:{default:r};n(2);var i=null,a=d3.selectAll(".spark");function s(){var t=d3.select(this),e=t.at("data-groups"),n=i.filter(function(t){return"us"==e?0==t.group||2==t.group||3==t.group||4==t.group:"world"==e?2==t.group||5==t.group||6==t.group||7==t.group:void 0});t.datum(n).spark()}e.default={init:function(){Promise.all([(0,o.default)()]).then(function(t){i=t[0],a.each(s)}).catch(function(t){return console.log(t)})},resize:function(){chart.resize()}}},function(t,e,n){"use strict";d3.selection.prototype.brawl=function(t){var e=this.nodes().map(function(t){var e=d3.select(t).select(".brawl"),n=e.datum(),r=null,o=null,i={switch:function(t){var n=t.comp,o=t.checked;n===r&&e.selectAll(".bin-brand-pf").classed("is-visible",o)},button:function(t){var n=t.comp,o=t.action;if(n===r){var i=null;"swatch"===o&&(i="num"),"num"===o&&(i="swatch"),e.selectAll(".bin-"+i+"Group").classed("is-visible",!1),e.selectAll(".bin-"+o+"Group").classed("is-visible",!0)}}},a={init:function(){o=d3.map([{number:0,group:"Fenty"},{number:1,group:"Make Up For Ever"},{number:2,group:"us-best"},{number:3,group:"poc-marketed"},{number:4,group:"poc-marketed"},{number:5,group:"nigerian-best"},{number:6,group:"japanese-best"},{number:7,group:"indian-best"}],function(t){return t.number}),a.resize(),a.render();var t=n.filter(function(t){return 0!=t.group})[0].group;r=o.get(+t).group,e.classed("brawl-pocMarketed"),e.classed("brawl-pocMarketed")},resize:function(){return Math.floor(.6*(e.node().offsetWidth-0-0)),e.node().offsetHeight,a},render:function(){var t=d3.nest().key(function(t){return t.product_short}).rollup(function(t){return{total:t.length,group:d3.nest().key(function(t){return t.lightnessGroup}).entries(t)}}).entries(n),r=d3.nest().key(function(t){return t.product_short}).rollup(function(t){return t.length}).entries(n),o=(d3.map(r,function(t){return t.key}),d3.map(n,function(t){return t.product_short})),i=[],s=t.map(function(t){var e=t.value.total,n=t.value.group;i.push(n);var r={total:e,group:d3.range(0,10).map(function(t){var e=t.toString();return n.find(function(t){return t.key===e})||{key:e,values:[]}})};return{key:t.key,values:r}}).sort(function(t,e){return d3.descending(t.values.total,e.values.total)});e.selectAll(".bin-brand").remove();var l=e.selectAll(".bin-brand").data(s).enter().append("div").attr("class",function(t,e){return"bin-brand bin-brand-"+t.key}).attr("data-brand",function(t,e){return e}),c=l.selectAll(".bin-brandTGroup").data(function(t){return[t]}).enter().append("div").attr("class","bin-brandTGroup");c.append("text").text(function(t){return o.get(t.key).brand}).attr("class","tk-atlas bin-brandTitle"),c.append("text").text(function(t){return o.get(t.key).product+" â€¢ "+t.values.total+" shades"}).attr("class","tk-atlas bin-brandProduct"),c.append("text").text(function(t){return t.values.total+" shades"}).attr("class","tk-atlas bin-brandTotal");var u=l.selectAll(".bin-category").data(function(t){return t.values.group}).enter().append("div").attr("class",function(t,e){return"bin-category bin-category-"+e}),d=(u.selectAll(".bin-swatchGroup").data(function(t){return[t]}).enter().append("div").attr("class","bin-swatchGroup").selectAll(".bin-swatch").data(function(t){return t.values}).enter().append("div").attr("class",function(t){return"bin-swatch bin-swatch-"+t.L}).style("height","6px").style("width","6px").style("background-color",function(t){return"#"+t.hex}),u.selectAll(".bin-numGroup").data(function(t){return[t]}).enter().append("div").attr("class","bin-numGroup").selectAll(".bin-num").data(function(t){return[t]}).enter().append("text").attr("class",function(t){return"bin-num bin-num-"+t.values.length+" tk-atlas"}).text(function(t){return t.values.length}),e.selectAll(".bin-labelGroup").data([0]).enter().append("div").attr("class","bin-labelGroup"));return d.append("div").attr("class","bin-labelTGroup").selectAll(".bin-labelTitle").data(["Lightness","Range"]).enter().append("text").text(function(t){return t}).attr("class","tk-atlas bin-labelTitle"),d.selectAll(".bin-labelCat").data([0,1,2,3,4,5,6,7,8,9]).enter().append("div").attr("class","bin-labelCat").selectAll(".bin-label").data(function(t){return[t]}).enter().append("text").attr("class","tk-atlas bin-label").text(function(t){return 10*t+" - "+(10*t+10)}).attr("alignment-baseline","middle").attr("text-anchor","middle"),a},data:function(t){return arguments.length?(n=t,e.datum(n),a.render(),a):n},on:function(t){var e=t.dispatch,n=t.event;return e.on(n+"."+r,i[n]),a},toggle:function(t,e){var n=d3.select("."+t),r=n.select(".toggle input");return 0===e&&(r.property("checked",!1),n.selectAll(".bin-brand-pf").classed("is-visible",!1)),1===e&&(r.property("checked",!0),n.selectAll(".bin-brand-pf").classed("is-visible",!0)),a}};return a.init(),a});return e.length>1?e:e.pop()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(0));n(4);var o=i(n(1));function i(t){return t&&t.__esModule?t:{default:t}}var a=[],s=null,l=null,c=null,u=d3.dispatch("switch","button"),d=d3.selectAll(".comp-brawl"),p=d3.selectAll(".toggle input"),f=null,b=d3.map([{comp:"us-best",section:"scroll-us-best"},{comp:"poc-marketed",section:"scroll-poc-marketed"},{comp:"nigerian-best",section:"scroll-nigeria"},{comp:"japanese-best",section:"scroll-japan"},{comp:"indian-best",section:"scroll-india"}],function(t){return t.comp});function g(){l=d3.map([{number:0,group:"Fenty"},{number:1,group:"Make Up For Ever"},{number:2,group:"us-best"},{number:3,group:"poc-created"},{number:4,group:"poc-marketed"},{number:5,group:"nigerian-best"},{number:6,group:"japanese-best"},{number:7,group:"indian-best"}],function(t){return t.group});var t=(f=d3.select(this)).at("data-competitors"),e=l.get(t).number;e="poc-marketed"==t?s.filter(function(t){return 4==t.group||0==t.group}):function(t){return s.filter(function(e){var n=l.get(t).number;return 3==n||4==n?3==e.group||4==e.group||0==e.group:e.group==n||0==e.group})}(t),d.select(".brawl");var n=f.datum(e).brawl().on({dispatch:u,event:"switch"}).on({dispatch:u,event:"button"});c=n.toggle,function(t){if(p.on("change",y),f.selectAll(".ui-display_button").on("click",h),f.select("#shades").classed("is-active",!0),f.selectAll(".bin-swatchGroup").classed("is-visible",!0),f.classed("scroll-poc-marketed")){var e=f.select("select");e.selectAll("option").data(["White","BIPOC","All"]).enter().append("option").attr("value",function(t){return t}).text(function(t){return t}).property("selected",function(t){return"White"==t}),e.on("change",function(e){var n=this.value;v(t,n)})}}(n),m(),function(t,e){var n=b.get(e).section,r=(0,o.default)();r.setup({container:"."+n,graphic:"."+n+" .scroll-graphic",text:".scroll-text",step:"."+n+" .step",debug:!1}).onStepEnter(function(e,r){return function(t,e,n){var r=e.index,o=d3.select("."+n).select(".scroll-graphic").select("select");"scroll-poc-marketed"===n?(0===r&&(c(n,1),v(t,"White"),o.selectAll("option").property("selected",function(t){return"White"==t})),1===r&&(c(n,1),v(t,"BIPOC"),o.selectAll("option").property("selected",function(t){return"BIPOC"==t}))):c(n,r)}(t,e,n)}).onContainerEnter(function(t,e){return function(t,e){var n=d3.select("."+e).select(".scroll-graphic");n.classed("is-fixed",!0),n.classed("is-bottom",!1)}(0,n)}).onContainerExit(function(t,e){return function(t,e){var n=d3.select("."+e).select(".scroll-graphic");n.classed("is-fixed",!1),n.classed("is-bottom","down"===t.direction)}(t,n)}),a.push(r)}(n,t)}function y(){var t=d3.select(this).at("data-competitors"),e=this.checked;u.call("switch",null,{comp:t,checked:e})}function h(){var t=d3.select(this);d3.select(this.parentNode).selectAll(".ui-display_button").classed("is-active",!1),t.classed("is-active",!0);var e=t.at("data-competitors"),n=t.at("data-action");u.call("button",null,{comp:e,action:n})}function v(t,e){var n=s.filter(function(t){return 3==t.group||4==t.group||0==t.group}),r=null,o=d3.select(".scroll-poc-marketed"),i=o.selectAll(".is-active"),a=i.at("data-competitors"),l=i.at("data-action"),c=o.select(".toggle input").property("checked");"White"===e&&(r=n.filter(function(t){return 4==t.group||0==t.group})),"BIPOC"===e&&(r=n.filter(function(t){return 3==t.group||0==t.group})),"All"===e&&(r=n),t.data(r).render(),u.call("button",null,{comp:a,action:l}),u.call("switch",null,{comp:a,checked:c})}function m(){var t=Math.floor(.8*window.innerHeight),e=f.select(".scroll-graphic"),n=e.select(".chart"),r=f.select(".scroll-text");r.selectAll(".step").style("height",t+"px");var o=d3.select(".scroll").node().offsetWidth;e.style("width",o+"px").style("height",window.innerHeight+"px"),r.node().offsetWidth,e.node().offsetWidth,n.style("height",Math.floor(window.innerHeight)+"px"),a.forEach(function(t){return t.resize()})}e.default={init:function(){Promise.all([(0,r.default)()]).then(function(t){s=t[0],d.each(g)}).catch(function(t){return console.log(t)})},resize:function(){chart.resize(),m()}}},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}d3.selection.prototype.headToHead=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum(),o={init:function(){o.resize(),o.render()},resize:function(){return e.node().offsetWidth,e.node().offsetHeight,o},render:function(){var t=d3.nest().key(function(t){return t.brand_short}).key(function(t){return t.lightnessGroup}).entries(n),i=d3.nest().key(function(t){return t.brand_short}).rollup(function(t){return t.length}).entries(n),a=d3.map(i,function(t){return t.key}),s=d3.map(n,function(t){return t.brand_short}),l=[],c=t.map(function(t){var e=t.values;l.push(e);var n=d3.range(0,10).map(function(t){var n=t.toString();return e.find(function(t){return t.key===n})||{key:n,values:[]}});return{key:t.key,values:n}}),u=l[0],d=l[1],p=u.concat(d),f=e.selectAll(".bin-brand").data(c).enter().append("div").attr("class",function(t,e){return"bin-brand bin-brand-"+e}).attr("data-brand",function(t,e){return e}),b=f.selectAll(".bin-brandTGroup").data(function(t){return[t]}).enter().append("div").attr("class","bin-brandTGroup");b.append("text").text(function(t){return s.get(t.key).brand}).attr("class","tk-atlas bin-brandTitle"),b.append("text").text(function(t){return s.get(t.key).product}).attr("class","tk-atlas bin-brandProduct"),b.append("text").text(function(t){return a.get(t.key).value+" shades"}).attr("class","tk-atlas bin-brandTotal");var g=f.selectAll(".bin-category").data(function(t){return t.values}).enter().append("div").attr("class",function(t,e){return"bin-category bin-category-"+e}).style("height",function(t,e){return 5*t.values.length+"px"}),y=(g.selectAll(".bin-swatchGroup").data(function(t){return[t]}).enter().append("div").attr("class","bin-swatchGroup").selectAll(".bin-swatch").data(function(t){return t.values}).enter().append("div").attr("class",function(t){return"bin-swatch bin-swatch-"+t.L}).style("height","4px").style("width","75px").style("background-color",function(t){return"#"+t.hex}),g.selectAll(".bin-count").data(function(t){return[t]}).enter().append("text").attr("data-value",function(t){return t.values.length}).attr("data-group",function(t){return t.key}).attr("class",function(t,e){var n=p.filter(function(e){return e.key==t.key}).map(function(t){return t.values.length}),o=Math.max.apply(Math,r(n));return 0==t.values.length?"tk-atlas bin-count bin-count-zero":t.values.length==o?"tk-atlas bin-count bin-count-winner":"tk-atlas bin-count"}).attr("data-status",function(t,e){var n=p.filter(function(e){return e.key==t.key}).map(function(t){return t.values.length}),o=Math.max.apply(Math,r(n));return t.values.length==o?"winner":"loser"}).text(function(t){return t.values.length}),e.selectAll(".bin-vsGroup").data([0]).enter().append("div").attr("class","bin-vsGroup").selectAll(".bin-vsCat").data([0,1,2,3,4,5,6,7,8,9,10]).enter().append("div").attr("class",function(t,e){return"tk-atlas bin-vsCat bin-vsCat-"+t}).selectAll(".bin-vs").data(function(t){return[t]}).enter().append("text").attr("class",function(t,e){return"tk-atlas bin-vs bin-vs-"+t}).text("vs").attr("alignment-baseline","middle").attr("text-anchor","middle"),e.selectAll(".bin-labelGroup").data([0]).enter().append("div").attr("class","bin-labelGroup"));return y.append("div").attr("class","bin-labelTGroup").selectAll(".bin-labelTitle").data(["Lightness","Range"]).enter().append("text").text(function(t){return t}).attr("class","tk-atlas bin-labelTitle"),y.selectAll(".bin-labelCat").data([0,1,2,3,4,5,6,7,8,9]).enter().append("div").attr("class","bin-labelCat").selectAll(".bin-label").data(function(t){return[t]}).enter().append("text").attr("class","tk-atlas bin-label").text(function(t){return 10*t+" - "+(10*t+10)}).attr("alignment-baseline","middle").attr("text-anchor","middle"),o},data:function(t){return arguments.length?(n=t,e.datum(n),o.render(),o):n},toggle:function(t){var n=e.selectAll(".bin-category"),r=e.selectAll(".bin-swatch"),i=e.selectAll(".bin-labelGroup"),a=e.selectAll(".bin-count"),s=e.selectAll(".bin-vsCat"),l=e.selectAll(".bin-vs"),c=d3.selectAll(".graphic-legend"),u=e.selectAll(".bin-category-2, .bin-vsCat-3, .bin-category-3, .bin-vsCat-4, .bin-category-5, .bin-vsCat-6, .bin-category-9, .bin-vsCat-10"),d=e.selectAll(".bin-category-6, .bin-vsCat-7, .bin-category-7, .bin-vsCat-8, .bin-category-8, .bin-vsCat-9");return 0==t&&(n.classed("spread",!1).transition().duration(500).ease(d3.easeCubicInOut).style("height",function(t,e){return 5*t.values.length+"px"}).style("margin","0px").style("border-color","rgba(0,0,0,0)"),r.transition().duration(500).ease(d3.easeCubicInOut).style("height","4px"),i.style("opacity",0),a.style("opacity",0).style("background-color","rgba(0,0,0,0)"),s.style("border-color","rgba(0,0,0,0)").transition().duration(500).ease(d3.easeCubicInOut).style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"0px"}).style("margin","0px"),l.style("opacity",0),c.style("opacity",0),u.style("background-color","rgba(0, 0, 0, 0)"),d.style("background-color","rgba(0, 0, 0, 0)")),1==t&&(n.classed("spread",!0).transition().duration(500).ease(d3.easeCubicInOut).style("height","45px").style("margin","2px 0").style("border-color","#c9c9c9"),r.transition().duration(500).ease(d3.easeCubicInOut).style("height","2px"),i.transition().duration(500).ease(d3.easeCubicInOut).style("opacity",1),a.style("opacity",0).style("background-color","rgba(0,0,0,0)"),s.transition().duration(500).ease(d3.easeCubicInOut).style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"45px"}).style("border-color","#c9c9c9").style("margin","2px 0"),l.style("opacity",0),c.style("opacity",0),u.style("background-color","rgba(0, 0, 0, 0)"),d.style("background-color","rgba(0, 0, 0, 0)")),2==t&&(n.classed("spread",!0).style("height","45px").style("margin","2px 0").style("border-color","#c9c9c9"),r.style("height","2px"),i.style("opacity",1),a.transition().duration(500).delay(function(t,e){return e>10?100*(e-10):100*e}).ease(d3.easeCubicInOut).style("opacity",1).transition().duration(500).delay(250).style("background-color",function(t,e,n){return d3.select(n[e]).classed("bin-count-winner")?"#84F0C9":"rgba(0,0,0,0)"}),s.style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"45px"}).style("border-color","#c9c9c9").style("margin","2px 0"),l.transition().duration(500).delay(function(t,e){return 100*e}).ease(d3.easeCubicInOut).style("opacity",1),c.transition().duration(500).ease(d3.easeCubicInOut).style("opacity",1),u.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(0, 0, 0, 0)"),d.style("background-color","rgba(0, 0, 0, 0)")),3==t&&(n.classed("spread",!0).style("height","45px").style("margin","2px 0").style("border-color","#c9c9c9"),r.style("height","2px"),i.style("opacity",1),a.transition().duration(500).delay(function(t,e){return e>10?100*(e-10):100*e}).ease(d3.easeCubicInOut).style("opacity",1).transition().duration(500).delay(250).style("background-color",function(t,e,n){return d3.select(n[e]).classed("bin-count-winner")?"#84F0C9":"rgba(0,0,0,0)"}),s.style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"45px"}).style("border-color","#c9c9c9").style("margin","2px 0"),l.transition().duration(500).delay(function(t,e){return 100*e}).ease(d3.easeCubicInOut).style("opacity",1),c.transition().duration(500).ease(d3.easeCubicInOut).style("opacity",1),u.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(132, 240, 201, .20)"),d.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(0, 0, 0, 0)")),4==t&&(n.classed("spread",!0).style("height","45px").style("margin","2px 0").style("border-color","#c9c9c9"),r.style("height","2px"),i.style("opacity",1),a.transition().duration(500).delay(function(t,e){return e>10?100*(e-10):100*e}).ease(d3.easeCubicInOut).style("opacity",1).transition().duration(500).delay(250).style("background-color",function(t,e,n){return d3.select(n[e]).classed("bin-count-winner")?"#84F0C9":"rgba(0,0,0,0)"}),s.style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"45px"}).style("border-color","#c9c9c9").style("margin","2px 0"),l.transition().duration(500).delay(function(t,e){return 100*e}).ease(d3.easeCubicInOut).style("opacity",1),c.transition().duration(500).ease(d3.easeCubicInOut).style("opacity",1),u.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(0, 0, 0, 0)"),d.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(132, 240, 201, .20)")),o}};return o.init(),o});return e.length>1?e:e.pop()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(0));function o(t){return t&&t.__esModule?t:{default:t}}n(6);var i=(0,o(n(1)).default)(),a=null,s=null,l=d3.selectAll(".h2h"),c=d3.selectAll(".scroll-part1"),u=c.select(".scroll-graphic"),d=u.select(".chart"),p=c.select(".scroll-text"),f=p.selectAll(".step");function b(){var t=d3.select(this),e=t.at("data-comp1"),n=t.at("data-comp2"),r=a.filter(function(t){return t.brand_short==e||t.brand_short==n}),o=t.datum(r).headToHead();s=o.toggle,g(),i.setup({container:".scroll",graphic:".scroll-graphic",text:".scroll-text",step:".step",debug:!1}).onStepEnter(y).onContainerEnter(h).onContainerExit(v)}function g(){var t=Math.floor(.8*window.innerHeight);f.style("height",t+"px");var e=c.node().offsetWidth;u.style("width",e+"px").style("height",window.innerHeight+"px");var n=p.node().offsetWidth,r=u.node().offsetWidth-n-50;d.style("width",r+"px").style("height",Math.floor(window.innerHeight)+"px"),i.resize()}function y(t){var e=t.index;s(e)}function h(t){u.classed("is-fixed",!0),u.classed("is-bottom",!1)}function v(t){u.classed("is-fixed",!1),u.classed("is-bottom","down"===t.direction)}e.default={init:function(){Promise.all([(0,r.default)()]).then(function(t){a=t[0],l.each(b)}).catch(function(t){return console.log(t)})},resize:function(){d.resize(),g()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={init:function(){console.log("Make something awesome!")},resize:function(){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}};e.default=r},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(e){var n=NaN,r="[object Symbol]",o=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,d=c||u||Function("return this")(),p=Object.prototype.toString,f=Math.max,b=Math.min,g=function(){return d.Date.now()};function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function h(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==r}(t))return n;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var c=a.test(t);return c||s.test(t)?l(t.slice(2),c?2:8):i.test(t)?n:+t}t.exports=function(t,e,n){var r,o,i,a,s,l,c=0,u=!1,d=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var n=r,i=o;return r=o=void 0,c=e,a=t.apply(i,n)}function m(t){var n=t-l;return void 0===l||n>=e||n<0||d&&t-c>=i}function x(){var t=g();if(m(t))return w(t);s=setTimeout(x,function(t){var n=e-(t-l);return d?b(n,i-(t-c)):n}(t))}function w(t){return s=void 0,p&&r?v(t):(r=o=void 0,a)}function k(){var t=g(),n=m(t);if(r=arguments,o=this,l=t,n){if(void 0===s)return function(t){return c=t,s=setTimeout(x,e),u?v(t):a}(l);if(d)return s=setTimeout(x,e),v(l)}return void 0===s&&(s=setTimeout(x,e)),a}return e=h(e)||0,y(n)&&(u=!!n.leading,i=(d="maxWait"in n)?f(h(n.maxWait)||0,e):i,p="trailing"in n?!!n.trailing:p),k.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=o=s=void 0},k.flush=function(){return void 0===s?a:w(g())},k}}).call(this,n(10))},function(t,e,n){"use strict";var r=c(n(11)),o=c(n(9)),i=(c(n(0)),c(n(8))),a=c(n(7)),s=c(n(5)),l=c(n(3));function c(t){return t&&t.__esModule?t:{default:t}}var u=d3.select("body"),d=0;u.classed("is-mobile",o.default.any()),window.addEventListener("resize",(0,r.default)(function(){var t=u.node().offsetWidth;d!==t&&(d=t,i.default.resize())},150)),i.default.init(),a.default.init(),s.default.init(),l.default.init()}]);